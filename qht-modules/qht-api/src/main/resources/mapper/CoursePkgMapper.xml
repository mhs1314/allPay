<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qht.mapper.CoursePkgMapper">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.qht.entity.CoursePkg" id="coursePkgMap">
        <result property="uid" column="uid"/>
        <result property="tenantId" column="tenant_id"/>
        <result property="pktTypeId" column="pkt_type_id"/>
        <result property="pkgSubjectId" column="pkg_subject_id"/>
        <result property="pkgEditionId" column="pkg_edition_id"/>
        <result property="pkgGradeId" column="pkg_grade_id"/>
        <result property="pkgName" column="pkg_name"/>
        <result property="playTypeId" column="play_type_id"/>
        <result property="min" column="min"/>
        <result property="max" column="max"/>
        <result property="open rangeId" column="open_ range_id"/>
        <result property="content" column="content"/>
        <result property="cover" column="cover"/>
    </resultMap>
    <select id="courseTypeList" resultType="com.qht.model.CoursePkgListModel" parameterType="com.qht.model.UidAndTenantIDParam">
    	select uid ,pkg_name   from course_pkg where tenant_id=#{tenant_id}
    </select>
    
    <!-- 教师|端首页-我的课程-详情介绍 -->
    <select id="selectIndexMyCourseDetails" parameterType="com.qht.model.UidAndTenantIDParam" resultType="com.qht.model.IndexMyCourseDetailsModel">
    	select p.uid,cp.play_type_id,p.name,p.video_file,p.begin,cp.content 
    	from course_pkg cp left join chapter c on c.course_id=cp.uid 
    	left join period p on p.chapter_id=c.uid 
    	where cp.uid=#{uid} and tenant_id=#{tenant_id}
    </select>
    <resultMap id="selectCourseChapterAndPeriod" type="com.qht.model.CourseChapterModel">
    	<result property="uid" column="uid"/>
    	<result property="name" column="name"/>
    	<collection property="period" ofType="com.qht.model.ClassModel">
            <result property="pid" column="pid"/>
            <result property="period_name" column="period_name"/>
            <result property="video_file" column="video_file"/>
            <result property="begin" column="begin"/>
        </collection>
    </resultMap>
    <!-- 课程详情-课程包体系y -->
    <select id="selectCourseChapter" parameterType="com.qht.model.UidAndTenantIDParam" >
    	select 
    	c.uid,c.name,p.name as period_name,p.uid as pid,p.video_file,p.begin 
    	from course_pkg cp 
    	inner join chapter c on cp.uid=c.course_id 
    	inner join period p on p.chapter_id=c.uid 
    	where cp.uid=#{uid} and cp.tenant_id=#{tenant_id}
    </select>

</mapper>